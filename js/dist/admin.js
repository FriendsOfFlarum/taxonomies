module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=37)}([function(t,e){t.exports=flarum.core.compat.app},function(t,e){t.exports=flarum.core.compat.Model},function(t,e,n){"use strict";function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return o}))},function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e,n){"use strict";e.a=function(t){return!1===t&&(t=[]),t.slice(0).sort((function(t,e){var n=t.order()-e.order();return 0!==n?n:t.name()>e.name()?1:t.name()<e.name()?-1:0}))}},function(t,e){t.exports=flarum.core.compat["components/LoadingIndicator"]},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(8),r=n.n(o);function a(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=t&&t.icon(),a=n.useColor,i=void 0===a||a;return e.className=r()([e.className,"icon",o?t.icon():"TaxonomyIcon"]),t?(e.style=e.style||{},o?e.style.color=i?t.color():"":e.style.backgroundColor=t.color()):e.className+=" untagged",o?m("i",e):m("span",e)}},function(t,e){t.exports=flarum.core.compat["utils/classList"]},function(t,e){t.exports=flarum.core.compat["utils/extractText"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},function(t,e,n){"use strict";e.a=function(t){return t.slice(0).sort((function(t,e){var n=t.order()-e.order();return 0!==n?n:t.name()>e.name()?1:t.name()<e.name()?-1:0}))}},function(t,e){t.exports=flarum.core.compat.Component},function(t,e){t.exports=flarum.core.compat["utils/computed"]},function(t,e,n){"use strict";var o=n(0),r=n.n(o);function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var i=n(2);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=n(1),u=n.n(l),c=n(13),m=n.n(c),d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s(a(e=t.call.apply(t,[this].concat(o))||this),"name",u.a.attribute("name")),s(a(e),"slug",u.a.attribute("slug")),s(a(e),"description",u.a.attribute("description")),s(a(e),"color",u.a.attribute("color")),s(a(e),"icon",u.a.attribute("icon")),s(a(e),"order",u.a.attribute("order")),s(a(e),"showLabel",u.a.attribute("showLabel")),s(a(e),"showFilter",u.a.attribute("showFilter")),s(a(e),"allowCustomValues",u.a.attribute("allowCustomValues")),s(a(e),"customValueValidation",u.a.attribute("customValueValidation")),s(a(e),"customValueSlugger",u.a.attribute("customValueSlugger")),s(a(e),"minTerms",u.a.attribute("minTerms")),s(a(e),"maxTerms",u.a.attribute("maxTerms")),s(a(e),"createdAt",u.a.attribute("createdAt",u.a.transformDate)),s(a(e),"canSearchDiscussions",u.a.attribute("canSearchDiscussions")),s(a(e),"uniqueKey",m()("id",(function(t){return"taxonomy"+t}))),e}return Object(i.a)(e,t),e}(u.a),f=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s(a(e=t.call.apply(t,[this].concat(o))||this),"name",u.a.attribute("name")),s(a(e),"slug",u.a.attribute("slug")),s(a(e),"description",u.a.attribute("description")),s(a(e),"color",u.a.attribute("color")),s(a(e),"icon",u.a.attribute("icon")),s(a(e),"order",u.a.attribute("order")),s(a(e),"createdAt",u.a.attribute("createdAt",u.a.transformDate)),s(a(e),"taxonomy",u.a.hasOne("taxonomy")),e}return Object(i.a)(e,t),e}(u.a);e.a=function(){r.a.store.models["fof-taxonomies"]=d,r.a.store.models["fof-taxonomy-terms"]=f}},,function(t,e){t.exports=flarum.core.compat["utils/string"]},,,function(t,e){t.exports=flarum.core.compat["components/Select"]},,,,,,,,,,,,function(t,e){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,e){t.exports=flarum.core.compat["components/AdminNav"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},function(t,e){t.exports=flarum.core.compat["components/PermissionGrid"]},function(t,e){t.exports=flarum.core.compat["utils/ItemList"]},,function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),a=n(3),i=n(31),s=n.n(i),l=n(32),u=n.n(l),c=n(2);function d(t,e,n){if(void 0===n)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=n}var f=function(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))},p=new Map,h=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,n){t[n]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!1,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!1,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}(),g=function(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return p.has(t)||p.set(t,new h),p.get(t)};function v(t,e,n){if(t instanceof Array)for(var o=0;o<t.length;++o)v(t[o],e,n);else t.addEventListener(e,n),g(t).setData("event"+e,n)}function y(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)y(t[n],e);else t.removeEventListener(e,g(t).getData("event"+e)),g(t).deleteData("event"+e)}function x(t,e,n){if(t instanceof Array)for(var o=0;o<t.length;++o)x(t[o],e,n);else t.setAttribute(e,n)}function b(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)b(t[n],e);else t.removeAttribute(e)}var w=function(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},E=function(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)},T=function(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode},C=function(t,e,n){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===n?t:t.nextElementSibling)},P=function(t,e){return C(t,e,"after")},L=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return"border-box"===e.getPropertyValue("box-sizing")?parseInt(e.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},V=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["width","padding-left","padding-right"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},O=function(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))},_=function(t){return t.composedPath&&t.composedPath()[0]||t.target},F=function(t,e,n){return{element:t,posX:n.pageX-e.left,posY:n.pageY-e.top}},I=function(t,e){if(!0===t.isSortable){var n=g(t).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==g(t).getConfig("connectWith")&&null!==g(t).getConfig("connectWith"))return g(t).getConfig("connectWith")===g(e).getConfig("connectWith")}return!1},S={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};var D,M,A,j,H,N,k,Y,B,q=function(t,e){if("string"==typeof g(t).getConfig("hoverClass")){var n=g(t).getConfig("hoverClass").split(" ");!0===e?(v(t,"mousemove",function(t,e){var n=this;if(void 0===e&&(e=250),"function"!=typeof t)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var o=null;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var i=Date.now();(null===o||i-o>=e)&&(o=i,t.apply(n,r))}}((function(e){0===e.buttons&&f(t.children,g(t).getConfig("items")).forEach((function(t){var o,r;t!==e.target?(o=t.classList).remove.apply(o,n):(r=t.classList).add.apply(r,n)}))}),g(t).getConfig("throttleTime"))),v(t,"mouseleave",(function(){f(t.children,g(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,n)}))}))):(y(t,"mousemove"),y(t,"mouseleave"))}},R=function(t){y(t,"dragstart"),y(t,"dragend"),y(t,"dragover"),y(t,"dragenter"),y(t,"drop"),y(t,"mouseenter"),y(t,"mouseleave")},z=function(t,e){t&&y(t,"dragleave"),e&&e!==t&&y(e,"dragleave")},W=function(t){var e;(e=t).h5s&&delete e.h5s.data,b(t,"aria-dropeffect")},U=function(t){b(t,"aria-grabbed"),b(t,"aria-copied"),b(t,"draggable"),b(t,"role")};function X(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function G(t,e){var n=d(t,"opts"),o=f(t.children,n.items).filter((function(t){return t.contains(e)||t.shadowRoot&&t.shadowRoot.contains(e)}));return o.length>0?o[0]:e}var K=function(t){var e=d(t,"opts"),n=f(t.children,e.items),o=O(n,e.handle);(x(t,"aria-dropeffect","move"),d(t,"_disabled","false"),x(o,"draggable","true"),!1===e.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&v(o,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===n.indexOf(t);)t=t.parentElement;t.dragDrop()}})))};function J(t,e){var n=String(e);return e=e||{},"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(n)?t.map((function(t){var e=d(t,"opts");return function(t,e,n){if(void 0===e&&(e=function(t,e){return t}),void 0===n&&(n=function(t){return t}),!(t instanceof HTMLElement)||!0==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof e||"function"!=typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var o=d(t,"opts").items,r=f(t.children,o),a=r.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:E(e,r)}}));return{container:n({node:t,itemCount:a.length}),items:a.map((function(n){return e(n,t)}))}}(t,e.itemSerializer,e.containerSerializer)})):(t.forEach((function(t){if(/enable|disable|destroy/.test(n))return J[n](t);["connectWith","disableIEFix"].forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&null!==e[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),e=Object.assign({},S,g(t).config,e),g(t).config=e,d(t,"opts",e),t.isSortable=!0,function(t){var e=d(t,"opts"),n=f(t.children,e.items),o=O(n,e.handle);d(t,"_disabled","false"),R(n),z(j,Y),y(o,"mousedown"),y(t,"dragover"),y(t,"dragenter"),y(t,"drop")}(t);var o,r=f(t.children,e.items);if(null!==e.placeholder&&void 0!==e.placeholder){var a=document.createElement(t.tagName);e.placeholder instanceof HTMLElement?a.appendChild(e.placeholder):a.innerHTML=e.placeholder,o=a.children[0]}g(t).placeholder=function(t,e,n){var o;if(void 0===n&&(n="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof n&&(o=e.classList).add.apply(o,n.split(" ")),e}(t,o,e.placeholderClass),d(t,"items",e.items),e.acceptFrom?d(t,"acceptFrom",e.acceptFrom):e.connectWith&&d(t,"connectWith",e.connectWith),K(t),x(r,"role","option"),x(r,"aria-grabbed","false"),q(t,!0),v(t,"dragstart",(function(t){var n=_(t);if(!0!==n.isSortable&&(t.stopImmediatePropagation(),(!e.handle||n.matches(e.handle))&&"false"!==n.getAttribute("draggable"))){var o=X(n,t),r=G(o,n);k=f(o.children,e.items),H=k.indexOf(r),N=E(r,o.children),j=o,function(t,e,n){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=F),t.dataTransfer&&t.dataTransfer.setDragImage){var o=n(e,w(e),t);if(!(o.element instanceof HTMLElement)||"number"!=typeof o.posX||"number"!=typeof o.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",_(t).id),t.dataTransfer.setDragImage(o.element,o.posX,o.posY)}}(t,r,e.customDragImage),M=L(r),A=V(r),r.classList.add(e.draggingClass),D=function(t,e){var n=t;return!0===g(e).getConfig("copy")&&(x(n=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=t.style.display),n}(r,o),x(D,"aria-grabbed","true"),o.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:N,index:H,container:j},item:D,originalTarget:n}}))}})),v(t,"dragenter",(function(n){var o=_(n),r=X(o,n);r&&r!==Y&&(B=f(r.children,d(r,"items")).filter((function(e){return e!==g(t).placeholder})),e.dropTargetContainerClass&&r.classList.add(e.dropTargetContainerClass),r.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:N,index:H,container:j},destination:{container:r,itemsBeforeUpdate:B},item:D,originalTarget:o}})),v(r,"dragleave",(function(t){var n=t.relatedTarget||t.fromElement;t.currentTarget.contains(n)||(e.dropTargetContainerClass&&r.classList.remove(e.dropTargetContainerClass),r.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:N,index:H,container:r},item:D,originalTarget:o}})))}))),Y=r})),v(t,"dragend",(function(n){if(D){D.classList.remove(e.draggingClass),x(D,"aria-grabbed","false"),"true"===D.getAttribute("aria-copied")&&"true"!==d(D,"dropped")&&D.remove(),D.style.display=D.oldDisplay,delete D.oldDisplay;var o=Array.from(p.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(T)[0];o&&o.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:N,index:H,container:j},item:D}})),Y=null,D=null,M=null,A=null}})),v(t,"drop",(function(n){if(I(t,D.parentElement)){n.preventDefault(),n.stopPropagation(),d(D,"dropped","true");var o=Array.from(p.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(T)[0];P(o,D),o.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:N,index:H,container:j},item:D}}));var r=g(t).placeholder,a=f(j.children,e.items).filter((function(t){return t!==r})),i=!0===this.isSortable?this:this.parentElement,s=f(i.children,d(i,"items")).filter((function(t){return t!==r})),l=E(D,Array.from(D.parentElement.children).filter((function(t){return t!==r}))),u=E(D,s);e.dropTargetContainerClass&&i.classList.remove(e.dropTargetContainerClass),N===l&&j===i||t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:N,index:H,container:j,itemsBeforeUpdate:k,items:a},destination:{index:u,elementIndex:l,container:i,itemsBeforeUpdate:B,items:s},item:D}}))}}));var i,s,l,u=(i=function(t,n,o,r){if(D)if(e.forcePlaceholderSize&&(g(t).placeholder.style.height=M+"px",g(t).placeholder.style.width=A+"px"),Array.from(t.children).indexOf(n)>-1){var a=L(n),i=V(n),s=E(g(t).placeholder,n.parentElement.children),l=E(n,n.parentElement.children);if(a>M||i>A){var u=a-M,c=i-A,m=w(n).top,d=w(n).left;if(s<l&&("vertical"===e.orientation&&r<m||"horizontal"===e.orientation&&o<d))return;if(s>l&&("vertical"===e.orientation&&r>m+a-u||"horizontal"===e.orientation&&o>d+i-c))return}void 0===D.oldDisplay&&(D.oldDisplay=D.style.display),"none"!==D.style.display&&(D.style.display="none");var h=!1;try{var v=w(n).top+n.offsetHeight/2,y=w(n).left+n.offsetWidth/2;h="vertical"===e.orientation&&r>=v||"horizontal"===e.orientation&&o>=y}catch(t){h=s<l}h?P(n,g(t).placeholder):function(t,e){C(t,e,"before")}(n,g(t).placeholder),Array.from(p.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==g(t).placeholder&&e.placeholder.remove()}))}else{var x=Array.from(p.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==x.indexOf(n)||t!==n||f(n.children,e.items).length||(x.forEach((function(t){return t.remove()})),n.appendChild(g(t).placeholder))}},void 0===(s=e.debounce)&&(s=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(l),l=setTimeout((function(){i.apply(void 0,t)}),s)}),c=function(t){var e=t.target,n=!0===e.isSortable?e:X(e,t);if(e=G(n,e),D&&I(n,D.parentElement)&&"true"!==d(n,"_disabled")){var o=d(n,"opts");parseInt(o.maxItems)&&f(n.children,d(n,"items")).length>=parseInt(o.maxItems)&&D.parentElement!==n||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===g(n).getConfig("copy")?"copy":"move",u(n,e,t.pageX,t.pageY))}};v(r.concat(t),"dragover",c),v(r.concat(t),"dragenter",c)})),t)}J.destroy=function(t){!function(t){var e=d(t,"opts")||{},n=f(t.children,e.items),o=O(n,e.handle);y(t,"dragover"),y(t,"dragenter"),y(t,"dragstart"),y(t,"dragend"),y(t,"drop"),W(t),y(o,"mousedown"),R(n),U(n),z(j,Y),t.isSortable=!1}(t)},J.enable=function(t){K(t)},J.disable=function(t){!function(t){var e=d(t,"opts"),n=f(t.children,e.items),o=O(n,e.handle);x(t,"aria-dropeffect","none"),d(t,"_disabled","true"),x(o,"draggable","false"),y(o,"mousedown")}(t)},J.__testing={_data:d,_removeItemEvents:R,_removeItemData:U,_removeSortableData:W,_removeContainerEvents:z};var Q=J,Z=n(33),tt=n.n(Z),et=n(4),nt=n.n(et),ot=n(6),rt=n.n(ot),at=n(5),it=n(12),st=n.n(it),lt=n(11),ut=n(9),ct=n.n(ut),mt=n(16),dt=n(10),ft=function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.className=function(){return"Modal--small TaxonomyEditModal"},n.translationPrefix=function(){return""},n.isNew=function(){return!0},n.title=function(){return r.a.translator.trans(this.translationPrefix()+"title."+(this.isNew()?"new":"edit"))},n.init=function(){t.prototype.init.call(this),this.dirty=!1},n.form=function(){return[]},n.content=function(){return m(".Modal-body",[this.form(),m(".FormGroup",[nt.a.component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.dirty},r.a.translator.trans(this.translationPrefix()+"submit."+(this.isNew()?"new":"edit")))," ",this.isNew()?null:nt.a.component({className:"Button Button--link TaxonomyEditModal-delete",children:r.a.translator.trans("fof-taxonomies.admin.edit-taxonomy.delete"),loading:this.loading,onclick:this.ondelete.bind(this)})])])},n.ondelete=function(){},e}(n.n(dt).a),pt=function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this);var e=this.props.term;this.name=e?e.name():"",this.slug=e?e.slug():"",this.description=e?e.description():"",this.color=e?e.color():"",this.icon=e?e.icon():"",this.dirty=!1},n.translationPrefix=function(){return"fof-taxonomies.admin.edit-term."},n.isNew=function(){return!this.props.term},n.form=function(){var t=this;return[m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.name")),m("input.FormControl",{type:"text",value:this.name,oninput:function(e){t.name=e.target.value,t.slug=Object(mt.slug)(e.target.value),t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.slug")),m("input.FormControl",{type:"text",value:this.slug,oninput:function(e){t.slug=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.description")),m("textarea.FormControl",{value:this.description,oninput:function(e){t.description=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.color")),m("input.FormControl",{type:"text",value:this.color,oninput:function(e){t.color=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.icon")),m(".helpText",r.a.translator.trans(this.translationPrefix()+"field.iconDescription",{a:m("a",{href:"https://fontawesome.com/icons?m=free",tabindex:-1})})),m("input.FormControl",{type:"text",value:this.icon,oninput:function(e){t.icon=e.target.value,t.dirty=!0}})])]},n.ondelete=function(){var t=this;confirm(ct()(r.a.translator.trans(this.translationPrefix()+"deleteConfirmation",{name:this.props.term.name()})))&&(this.loading=!0,this.props.term.delete({errorHandler:this.onerror.bind(this)}).then((function(){r.a.modal.close(),t.props.ondelete&&t.props.ondelete()}),(function(){t.loaded()})))},n.onsubmit=function(){var t=this;this.loading=!0;var e=this.props.term||r.a.store.createRecord("fof-taxonomy-terms"),n={errorHandler:this.onerror.bind(this)};this.isNew()&&(n.url=r.a.forum.attribute("apiUrl")+this.props.taxonomy.apiEndpoint()+"/terms"),e.save({name:this.name,slug:this.slug,description:this.description,color:this.color,icon:this.icon},n).then((function(){r.a.modal.close(),t.props.onsave&&t.props.onsave(e)}),(function(){t.loaded()}))},e}(ft),ht=n(7),gt=function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.init=function(){var t=this;this.terms=null,r.a.request({method:"GET",url:r.a.forum.attribute("apiUrl")+this.props.taxonomy.apiEndpoint()+"/terms"}).then((function(e){t.terms=r.a.store.pushPayload(e),m.redraw()}))},n.view=function(){var t=this;return m(".TaxonomyTermEdit",[null===this.terms?rt.a.component({}):m("ol.TaxonomyTermList",{config:function(e){Q(e)[0].addEventListener("sortupdate",(function(e){var n=t.$(".js-sort-term-item").map((function(){return $(this).data("id")})).get();r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+t.props.taxonomy.apiEndpoint()+"/terms/order",data:{order:n}}).then((function(t){r.a.store.pushPayload(t)})).catch((function(t){throw m.redraw.strategy("all"),m.redraw(),t}))}))}},this.terms.map((function(e,n){return m("li.TaxonomyTermListItem.js-sort-term-item",{"data-id":e.id(),style:{color:e.color()}},[Object(ht.a)(e),m("span.TaxonomyTermListItem-name",e.name()),nt.a.component({className:"Button Button--link",icon:"fas fa-pencil-alt",onclick:function(){r.a.modal.show(new pt({term:e,ondelete:function(){t.terms.splice(n,1)}}))}})])}))),nt.a.component({className:"Button",onclick:function(){r.a.modal.show(new pt({taxonomy:t.props.taxonomy,onsave:function(e){t.terms=Object(lt.a)([].concat(t.terms,[e]))}}))}},r.a.translator.trans("fof-taxonomies.admin.page.create.term"))," ",nt.a.component({className:"Button",onclick:function(){r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+t.props.taxonomy.apiEndpoint()+"/terms/order",data:{order:[]}}).then((function(t){r.a.store.pushPayload(t)})).catch((function(t){throw m.redraw.strategy("all"),m.redraw(),t}))}},r.a.translator.trans("fof-taxonomies.admin.page.reset-term-order"))])},e}(st.a),vt=n(19),yt=n.n(vt),xt=function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this);var e=this.props.taxonomy;this.name=e?e.name():"",this.slug=e?e.slug():"",this.description=e?e.description():"",this.color=e?e.color():"",this.icon=e?e.icon():"",this.showLabel=!!e&&e.showLabel(),this.showFilter=!!e&&e.showFilter(),this.allowCustomValues=!!e&&e.allowCustomValues(),this.customValueValidation=(e?e.customValueValidation():null)||"",this.customValueSlugger=(e?e.customValueSlugger():null)||"random",this.minTerms=e?e.minTerms():"",this.maxTerms=e?e.maxTerms():""},n.translationPrefix=function(){return"fof-taxonomies.admin.edit-taxonomy."},n.isNew=function(){return!this.props.taxonomy},n.form=function(){var t=this;return[m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.name")),m("input.FormControl",{type:"text",value:this.name,oninput:function(e){t.name=e.target.value,t.slug=Object(mt.slug)(e.target.value),t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.slug")),m("input.FormControl",{type:"text",value:this.slug,oninput:function(e){t.slug=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.description")),m("textarea.FormControl",{value:this.description,oninput:function(e){t.description=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.color")),m("input.FormControl",{type:"text",value:this.color,oninput:function(e){t.color=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.icon")),m(".helpText",r.a.translator.trans(this.translationPrefix()+"field.iconDescription",{a:m("a",{href:"https://fontawesome.com/icons?m=free",tabindex:-1})})),m("input.FormControl",{type:"text",value:this.icon,oninput:function(e){t.icon=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",[m("input",{type:"checkbox",checked:this.showLabel,onchange:function(){t.showLabel=!t.showLabel,t.dirty=!0}})," ",r.a.translator.trans(this.translationPrefix()+"field.showLabel")])]),m(".Form-group",[m("label",[m("input",{type:"checkbox",checked:this.showFilter,onchange:function(){t.showFilter=!t.showFilter,t.dirty=!0}})," ",r.a.translator.trans(this.translationPrefix()+"field.showFilter")])]),m(".Form-group",[m("label",[m("input",{type:"checkbox",checked:this.allowCustomValues,onchange:function(){t.allowCustomValues=!t.allowCustomValues,t.dirty=!0}})," ",r.a.translator.trans(this.translationPrefix()+"field.allowCustomValues")])]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.customValueValidation")),yt.a.component({options:{"":r.a.translator.trans(this.translationPrefix()+"validation-options.default"),alpha_num:r.a.translator.trans(this.translationPrefix()+"validation-options.alpha_num"),alpha_dash:r.a.translator.trans(this.translationPrefix()+"validation-options.alpha_dash"),regex:r.a.translator.trans(this.translationPrefix()+"validation-options.regex")},value:0===this.customValueValidation.indexOf("/")?"regex":this.customValueValidation,onchange:function(e){t.customValueValidation="regex"===e?"//":e,t.dirty=!0},disabled:!this.allowCustomValues}),0===this.customValueValidation.indexOf("/")?m(".TaxonomyRegexInput",[m("span","/"),m("input.FormControl",{type:"text",value:this.customValueValidation.split("/")[1],oninput:function(e){t.customValueValidation="/"+e.target.value+"/"+t.customValueValidation.split("/")[2],t.dirty=!0},disabled:!this.allowCustomValues}),m("span","/"),m("input.FormControl",{type:"text",value:this.customValueValidation.split("/")[2],oninput:function(e){t.customValueValidation="/"+t.customValueValidation.split("/")[1]+"/"+e.target.value,t.dirty=!0},disabled:!this.allowCustomValues})]):null]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.customValueSlugger")),m(".helpText",r.a.translator.trans(this.translationPrefix()+"field.customValueSluggerDescription")),yt.a.component({options:{random:r.a.translator.trans(this.translationPrefix()+"slugger-options.random"),alpha_dash:r.a.translator.trans(this.translationPrefix()+"slugger-options.alpha_dash"),transliterator:r.a.translator.trans(this.translationPrefix()+"slugger-options.transliterator")},value:this.customValueSlugger,onchange:function(e){t.customValueSlugger=e,t.dirty=!0},disabled:!this.allowCustomValues})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.countRequired")),m(".helpText",r.a.translator.trans(this.translationPrefix()+"field.countRequiredDescription")),m(".TaxonomyModal-rangeInput",[m("input.FormControl",{type:"number",min:0,step:1,value:this.minTerms,oninput:function(e){t.minTerms=parseInt(e.target.value)||"",t.dirty=!0}})," ",r.a.translator.trans(this.translationPrefix()+"field.rangeSeparatorText")," ",m("input.FormControl",{type:"number",min:0,step:1,value:this.maxTerms,oninput:function(e){t.maxTerms=parseInt(e.target.value)||"",t.dirty=!0}})])])]},n.ondelete=function(){var t=this;confirm(ct()(r.a.translator.trans(this.translationPrefix()+"deleteConfirmation",{name:this.props.taxonomy.name()})))&&(this.loading=!0,this.props.taxonomy.delete({errorHandler:this.onerror.bind(this)}).then((function(){r.a.modal.close(),t.props.ondelete&&t.props.ondelete()}),(function(){t.loaded()})))},n.onsubmit=function(){var t=this;this.loading=!0;var e=this.props.taxonomy||r.a.store.createRecord("fof-taxonomies");e.save({name:this.name,slug:this.slug,description:this.description,color:this.color,icon:this.icon,show_label:this.showLabel,show_filter:this.showFilter,allow_custom_values:this.allowCustomValues,custom_value_validation:this.customValueValidation,custom_value_slugger:this.customValueSlugger,min_terms:this.minTerms,max_terms:this.maxTerms},{errorHandler:this.onerror.bind(this)}).then((function(){r.a.modal.close(),t.props.onsave&&t.props.onsave(e)}),(function(){t.loaded()}))},e}(ft),bt=function(t){function e(){return t.apply(this,arguments)||this}Object(c.a)(e,t);var n=e.prototype;return n.init=function(){var e=this;t.prototype.init.call(this),this.tabIndex=0,this.taxonomies=null,r.a.request({method:"GET",url:r.a.forum.attribute("apiUrl")+"/fof-taxonomies"}).then((function(t){e.taxonomies=r.a.store.pushPayload(t),m.redraw()}))},n.view=function(){var t=this;return m(".TaxonomiesPage",m(".container",[null===this.taxonomies?rt.a.component({}):[m("h2",r.a.translator.trans("fof-taxonomies.admin.page.title")),m(".TaxonomyTabs",{config:function(e){Q(e,{selector:".js-sort-taxonomy-item"})[0].addEventListener("sortupdate",(function(e){var n=t.$(".js-sort-taxonomy-item").map((function(){return $(this).data("id")})).get();r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+"/fof-taxonomies/order",data:{order:n}}).then((function(e){t.taxonomies=r.a.store.pushPayload(e),t.tabIndex=0})).catch((function(t){throw m.redraw.strategy("all"),m.redraw(),t}))}))}},[this.taxonomies.map((function(e,n){return m(".TaxonomyTab.js-sort-taxonomy-item",{"data-id":e.id(),key:e.id(),onclick:function(){t.tabIndex=n},className:t.tabIndex===n?"active":"",style:{color:e.color()}},[Object(ht.a)(e)," ",e.name()," ",nt.a.component({className:"Button Button--link",icon:"fas fa-pencil-alt",onclick:function(){r.a.modal.show(new xt({taxonomy:e,ondelete:function(){t.taxonomies.splice(n,1),t.tabIndex=0}}))}})])})),nt.a.component({key:"new",className:"TaxonomyTab",icon:"fas fa-plus",onclick:function(){r.a.modal.show(new xt({onsave:function(e){t.taxonomies=Object(at.a)([].concat(t.taxonomies,[e])),t.tabIndex=t.taxonomies.findIndex((function(t){return t===e}))}}))}},r.a.translator.trans("fof-taxonomies.admin.page.create.taxonomy"))]),this.tabIndex<this.taxonomies.length?m("div",m("div",{key:this.taxonomies[this.tabIndex].id()},gt.component({taxonomy:this.taxonomies[this.tabIndex]}))):null]]))},e}(tt.a),wt=n(34),Et=n.n(wt),Tt=n(35),Ct=n.n(Tt),Pt=n(14);r.a.initializers.add("fof-taxonomies",(function(){r.a.routes["fof-taxonomies"]={path:"/taxonomies",component:bt.component()},r.a.extensionSettings["fof-taxonomies"]=function(){return m.route(r.a.route("fof-taxonomies"))},Object(a.extend)(u.a.prototype,"items",(function(t){t.add("fof-taxonomies",s.a.component({href:r.a.route("fof-taxonomies"),icon:"fas fa-tags",description:r.a.translator.trans("fof-taxonomies.admin.menu.description")},r.a.translator.trans("fof-taxonomies.admin.menu.title")))})),Object(a.extend)(Et.a.prototype,"permissionItems",(function(t){var e=new Ct.a;e.add("seeOwnDiscussion",{icon:"fas fa-eye",label:r.a.translator.trans("fof-taxonomies.admin.permissions.seeOwnDiscussion"),permission:"discussion.seeOwnTaxonomy"}),e.add("seeAnyDiscussion",{icon:"fas fa-eye",label:r.a.translator.trans("fof-taxonomies.admin.permissions.seeAnyDiscussion"),permission:"discussion.seeAnyTaxonomy",allowGuest:!0}),e.add("editOwnDiscussion",{icon:"fas fa-tag",label:r.a.translator.trans("fof-taxonomies.admin.permissions.editOwnDiscussion"),permission:"discussion.editOwnTaxonomy"}),e.add("editAnyDiscussion",{icon:"fas fa-tag",label:r.a.translator.trans("fof-taxonomies.admin.permissions.editAnyDiscussion"),permission:"discussion.editAnyTaxonomy"}),t.add("taxonomies",{label:r.a.translator.trans("fof-taxonomies.admin.permissions.heading"),children:e.toArray()})})),Object(Pt.a)()}))}]);
//# sourceMappingURL=admin.js.map