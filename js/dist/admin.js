module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=33)}([function(t,e){t.exports=flarum.core.compat.app},function(t,e){t.exports=flarum.core.compat.Model},function(t,e,n){"use strict";function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return o}))},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e){t.exports=flarum.core.compat.extend},function(t,e,n){"use strict";e.a=function(t){return t.slice(0).sort((function(t,e){var n=t.order()-e.order();return 0!==n?n:t.name()>e.name()?1:t.name()<e.name()?-1:0}))}},function(t,e,n){"use strict";e.a=function(t){return t.slice(0).sort((function(t,e){var n=t.order()-e.order();return 0!==n?n:t.name()>e.name()?1:t.name()<e.name()?-1:0}))}},function(t,e){t.exports=flarum.core.compat["components/LoadingIndicator"]},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(10),r=n.n(o);function a(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=t&&t.icon(),a=n.useColor,i=void 0===a||a;return e.className=r()([e.className,"icon",o?t.icon():"TaxonomyIcon"]),t?(e.style=e.style||{},o?e.style.color=i?t.color():"":e.style.backgroundColor=t.color()):e.className+=" untagged",o?m("i",e):m("span",e)}},function(t,e){t.exports=flarum.core.compat["utils/mixin"]},function(t,e){t.exports=flarum.core.compat["utils/classList"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},function(t,e){t.exports=flarum.core.compat.Component},function(t,e){t.exports=flarum.core.compat["utils/computed"]},function(t,e,n){"use strict";var o=n(0),r=n.n(o),a=n(2),i=n(1),s=n.n(i),l=n(13),c=n.n(l),u=n(9),m=n.n(u),f=function(t){function e(){return t.apply(this,arguments)||this}return Object(a.a)(e,t),e}(m()(s.a,{name:s.a.attribute("name"),slug:s.a.attribute("slug"),description:s.a.attribute("description"),color:s.a.attribute("color"),icon:s.a.attribute("icon"),order:s.a.attribute("order"),showLabel:s.a.attribute("showLabel"),showFilter:s.a.attribute("showFilter"),allowCustomValues:s.a.attribute("allowCustomValues"),minTerms:s.a.attribute("minTerms"),maxTerms:s.a.attribute("maxTerms"),createdAt:s.a.attribute("createdAt",s.a.transformDate),uniqueKey:c()("id",(function(t){return"taxonomy"+t}))})),d=function(t){function e(){return t.apply(this,arguments)||this}return Object(a.a)(e,t),e}(m()(s.a,{name:s.a.attribute("name"),slug:s.a.attribute("slug"),description:s.a.attribute("description"),color:s.a.attribute("color"),icon:s.a.attribute("icon"),order:s.a.attribute("order"),createdAt:s.a.attribute("createdAt",s.a.transformDate),taxonomy:s.a.hasOne("taxonomy")}));e.a=function(){r.a.store.models["fof-taxonomies"]=f,r.a.store.models["fof-taxonomy-terms"]=d}},,function(t,e){t.exports=flarum.core.compat["utils/string"]},,,,,,,,,,,,,function(t,e){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,e){t.exports=flarum.core.compat["components/AdminNav"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},,function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),a=n(4),i=n(29),s=n.n(i),l=n(30),c=n.n(l),u=n(2),f=n(31),d=n.n(f),p=n(3),h=n.n(p),g=n(7),v=n.n(g),y=n(5);function b(t,e,n){if(void 0===n)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=n}var x=function(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))},w=new Map,E=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,n){t[n]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!1,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!1,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}(),T=function(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return w.has(t)||w.set(t,new E),w.get(t)};function C(t,e,n){if(t instanceof Array)for(var o=0;o<t.length;++o)C(t[o],e,n);else t.addEventListener(e,n),T(t).setData("event"+e,n)}function L(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)L(t[n],e);else t.removeEventListener(e,T(t).getData("event"+e)),T(t).deleteData("event"+e)}function P(t,e,n){if(t instanceof Array)for(var o=0;o<t.length;++o)P(t[o],e,n);else t.setAttribute(e,n)}function F(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)F(t[n],e);else t.removeAttribute(e)}var O=function(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},I=function(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)},M=function(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode},_=function(t,e,n){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===n?t:t.nextElementSibling)},j=function(t,e){return _(t,e,"after")},A=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return"border-box"===e.getPropertyValue("box-sizing")?parseInt(e.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},H=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["width","padding-left","padding-right"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},S=function(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))},D=function(t){return t.composedPath&&t.composedPath()[0]||t.target},N=function(t,e,n){return{element:t,posX:n.pageX-e.left,posY:n.pageY-e.top}},k=function(t,e){if(!0===t.isSortable){var n=T(t).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==T(t).getConfig("connectWith")&&null!==T(t).getConfig("connectWith"))return T(t).getConfig("connectWith")===T(e).getConfig("connectWith")}return!1},Y={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};var B,z,V,q,W,R,U,X,G,K=function(t,e){if("string"==typeof T(t).getConfig("hoverClass")){var n=T(t).getConfig("hoverClass").split(" ");!0===e?(C(t,"mousemove",function(t,e){var n=this;if(void 0===e&&(e=250),"function"!=typeof t)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var o=null;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var i=Date.now();(null===o||i-o>=e)&&(o=i,t.apply(n,r))}}((function(e){0===e.buttons&&x(t.children,T(t).getConfig("items")).forEach((function(t){var o,r;t!==e.target?(o=t.classList).remove.apply(o,n):(r=t.classList).add.apply(r,n)}))}),T(t).getConfig("throttleTime"))),C(t,"mouseleave",(function(){x(t.children,T(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,n)}))}))):(L(t,"mousemove"),L(t,"mouseleave"))}},J=function(t){L(t,"dragstart"),L(t,"dragend"),L(t,"dragover"),L(t,"dragenter"),L(t,"drop"),L(t,"mouseenter"),L(t,"mouseleave")},Q=function(t,e){t&&L(t,"dragleave"),e&&e!==t&&L(e,"dragleave")},Z=function(t){var e;(e=t).h5s&&delete e.h5s.data,F(t,"aria-dropeffect")},tt=function(t){F(t,"aria-grabbed"),F(t,"aria-copied"),F(t,"draggable"),F(t,"role")};function et(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function nt(t,e){var n=b(t,"opts"),o=x(t.children,n.items).filter((function(t){return t.contains(e)||t.shadowRoot&&t.shadowRoot.contains(e)}));return o.length>0?o[0]:e}var ot=function(t){var e=b(t,"opts"),n=x(t.children,e.items),o=S(n,e.handle);(P(t,"aria-dropeffect","move"),b(t,"_disabled","false"),P(o,"draggable","true"),!1===e.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&C(o,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===n.indexOf(t);)t=t.parentElement;t.dragDrop()}})))};function rt(t,e){var n=String(e);return e=e||{},"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(n)?t.map((function(t){var e=b(t,"opts");return function(t,e,n){if(void 0===e&&(e=function(t,e){return t}),void 0===n&&(n=function(t){return t}),!(t instanceof HTMLElement)||!0==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof e||"function"!=typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var o=b(t,"opts").items,r=x(t.children,o),a=r.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:I(e,r)}}));return{container:n({node:t,itemCount:a.length}),items:a.map((function(n){return e(n,t)}))}}(t,e.itemSerializer,e.containerSerializer)})):(t.forEach((function(t){if(/enable|disable|destroy/.test(n))return rt[n](t);["connectWith","disableIEFix"].forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&null!==e[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),e=Object.assign({},Y,T(t).config,e),T(t).config=e,b(t,"opts",e),t.isSortable=!0,function(t){var e=b(t,"opts"),n=x(t.children,e.items),o=S(n,e.handle);b(t,"_disabled","false"),J(n),Q(q,X),L(o,"mousedown"),L(t,"dragover"),L(t,"dragenter"),L(t,"drop")}(t);var o,r=x(t.children,e.items);if(null!==e.placeholder&&void 0!==e.placeholder){var a=document.createElement(t.tagName);e.placeholder instanceof HTMLElement?a.appendChild(e.placeholder):a.innerHTML=e.placeholder,o=a.children[0]}T(t).placeholder=function(t,e,n){var o;if(void 0===n&&(n="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof n&&(o=e.classList).add.apply(o,n.split(" ")),e}(t,o,e.placeholderClass),b(t,"items",e.items),e.acceptFrom?b(t,"acceptFrom",e.acceptFrom):e.connectWith&&b(t,"connectWith",e.connectWith),ot(t),P(r,"role","option"),P(r,"aria-grabbed","false"),K(t,!0),C(t,"dragstart",(function(t){var n=D(t);if(!0!==n.isSortable&&(t.stopImmediatePropagation(),(!e.handle||n.matches(e.handle))&&"false"!==n.getAttribute("draggable"))){var o=et(n,t),r=nt(o,n);U=x(o.children,e.items),W=U.indexOf(r),R=I(r,o.children),q=o,function(t,e,n){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=N),t.dataTransfer&&t.dataTransfer.setDragImage){var o=n(e,O(e),t);if(!(o.element instanceof HTMLElement)||"number"!=typeof o.posX||"number"!=typeof o.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",D(t).id),t.dataTransfer.setDragImage(o.element,o.posX,o.posY)}}(t,r,e.customDragImage),z=A(r),V=H(r),r.classList.add(e.draggingClass),B=function(t,e){var n=t;return!0===T(e).getConfig("copy")&&(P(n=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=t.style.display),n}(r,o),P(B,"aria-grabbed","true"),o.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:R,index:W,container:q},item:B,originalTarget:n}}))}})),C(t,"dragenter",(function(n){var o=D(n),r=et(o,n);r&&r!==X&&(G=x(r.children,b(r,"items")).filter((function(e){return e!==T(t).placeholder})),e.dropTargetContainerClass&&r.classList.add(e.dropTargetContainerClass),r.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:R,index:W,container:q},destination:{container:r,itemsBeforeUpdate:G},item:B,originalTarget:o}})),C(r,"dragleave",(function(t){var n=t.relatedTarget||t.fromElement;t.currentTarget.contains(n)||(e.dropTargetContainerClass&&r.classList.remove(e.dropTargetContainerClass),r.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:R,index:W,container:r},item:B,originalTarget:o}})))}))),X=r})),C(t,"dragend",(function(n){if(B){B.classList.remove(e.draggingClass),P(B,"aria-grabbed","false"),"true"===B.getAttribute("aria-copied")&&"true"!==b(B,"dropped")&&B.remove(),B.style.display=B.oldDisplay,delete B.oldDisplay;var o=Array.from(w.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(M)[0];o&&o.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:R,index:W,container:q},item:B}})),X=null,B=null,z=null,V=null}})),C(t,"drop",(function(n){if(k(t,B.parentElement)){n.preventDefault(),n.stopPropagation(),b(B,"dropped","true");var o=Array.from(w.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(M)[0];j(o,B),o.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:R,index:W,container:q},item:B}}));var r=T(t).placeholder,a=x(q.children,e.items).filter((function(t){return t!==r})),i=!0===this.isSortable?this:this.parentElement,s=x(i.children,b(i,"items")).filter((function(t){return t!==r})),l=I(B,Array.from(B.parentElement.children).filter((function(t){return t!==r}))),c=I(B,s);e.dropTargetContainerClass&&i.classList.remove(e.dropTargetContainerClass),R===l&&q===i||t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:R,index:W,container:q,itemsBeforeUpdate:U,items:a},destination:{index:c,elementIndex:l,container:i,itemsBeforeUpdate:G,items:s},item:B}}))}}));var i,s,l,c=(i=function(t,n,o,r){if(B)if(e.forcePlaceholderSize&&(T(t).placeholder.style.height=z+"px",T(t).placeholder.style.width=V+"px"),Array.from(t.children).indexOf(n)>-1){var a=A(n),i=H(n),s=I(T(t).placeholder,n.parentElement.children),l=I(n,n.parentElement.children);if(a>z||i>V){var c=a-z,u=i-V,m=O(n).top,f=O(n).left;if(s<l&&("vertical"===e.orientation&&r<m||"horizontal"===e.orientation&&o<f))return;if(s>l&&("vertical"===e.orientation&&r>m+a-c||"horizontal"===e.orientation&&o>f+i-u))return}void 0===B.oldDisplay&&(B.oldDisplay=B.style.display),"none"!==B.style.display&&(B.style.display="none");var d=!1;try{var p=O(n).top+n.offsetHeight/2,h=O(n).left+n.offsetWidth/2;d="vertical"===e.orientation&&r>=p||"horizontal"===e.orientation&&o>=h}catch(t){d=s<l}d?j(n,T(t).placeholder):function(t,e){_(t,e,"before")}(n,T(t).placeholder),Array.from(w.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==T(t).placeholder&&e.placeholder.remove()}))}else{var g=Array.from(w.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==g.indexOf(n)||t!==n||x(n.children,e.items).length||(g.forEach((function(t){return t.remove()})),n.appendChild(T(t).placeholder))}},void 0===(s=e.debounce)&&(s=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(l),l=setTimeout((function(){i.apply(void 0,t)}),s)}),u=function(t){var e=t.target,n=!0===e.isSortable?e:et(e,t);if(e=nt(n,e),B&&k(n,B.parentElement)&&"true"!==b(n,"_disabled")){var o=b(n,"opts");parseInt(o.maxItems)&&x(n.children,b(n,"items")).length>=parseInt(o.maxItems)&&B.parentElement!==n||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===T(n).getConfig("copy")?"copy":"move",c(n,e,t.pageX,t.pageY))}};C(r.concat(t),"dragover",u),C(r.concat(t),"dragenter",u)})),t)}rt.destroy=function(t){!function(t){var e=b(t,"opts")||{},n=x(t.children,e.items),o=S(n,e.handle);L(t,"dragover"),L(t,"dragenter"),L(t,"dragstart"),L(t,"dragend"),L(t,"drop"),Z(t),L(o,"mousedown"),J(n),tt(n),Q(q,X),t.isSortable=!1}(t)},rt.enable=function(t){ot(t)},rt.disable=function(t){!function(t){var e=b(t,"opts"),n=x(t.children,e.items),o=S(n,e.handle);P(t,"aria-dropeffect","none"),b(t,"_disabled","true"),P(o,"draggable","false"),L(o,"mousedown")}(t)},rt.__testing={_data:b,_removeItemEvents:J,_removeItemData:tt,_removeSortableData:Z,_removeContainerEvents:Q};var at=rt,it=n(12),st=n.n(it),lt=n(6),ct=n(16),ut=n(11),mt=function(t){function e(){return t.apply(this,arguments)||this}Object(u.a)(e,t);var n=e.prototype;return n.className=function(){return"Modal--small TaxonomyEditModal"},n.translationPrefix=function(){return""},n.isNew=function(){return!0},n.title=function(){return r.a.translator.trans(this.translationPrefix()+"title."+(this.isNew()?"new":"edit"))},n.init=function(){t.prototype.init.call(this),this.dirty=!1},n.form=function(){return[]},n.content=function(){return m(".Modal-body",[this.form(),m(".FormGroup",[h.a.component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.dirty},r.a.translator.trans(this.translationPrefix()+"submit."+(this.isNew()?"new":"edit")))," ",this.isNew()?null:h.a.component({className:"Button Button--link TaxonomyEditModal-delete",children:r.a.translator.trans("fof-taxonomies.admin.edit-taxonomy.delete"),loading:this.loading,onclick:this.ondelete.bind(this)})])])},n.ondelete=function(){},e}(n.n(ut).a),ft=function(t){function e(){return t.apply(this,arguments)||this}Object(u.a)(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this);var e=this.props.term;this.name=e?e.name():"",this.slug=e?e.slug():"",this.description=e?e.description():"",this.color=e?e.color():"",this.icon=e?e.icon():"",this.dirty=!1},n.translationPrefix=function(){return"fof-taxonomies.admin.edit-term."},n.isNew=function(){return!this.props.term},n.form=function(){var t=this;return[m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.name")),m("input.FormControl",{type:"text",value:this.name,oninput:function(e){t.name=e.target.value,t.slug=Object(ct.slug)(e.target.value),t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.slug")),m("input.FormControl",{type:"text",value:this.slug,oninput:function(e){t.slug=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.description")),m("textarea.FormControl",{value:this.description,oninput:function(e){t.description=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.color")),m("input.FormControl",{type:"text",value:this.color,oninput:function(e){t.color=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.icon")),m("input.FormControl",{type:"text",value:this.icon,oninput:function(e){t.icon=e.target.value,t.dirty=!0}})])]},n.ondelete=function(){var t=this;r.a.translator.trans(this.translationPrefix()+"deleteConfirmation",{name:m("em",this.props.term.name())})&&(this.loading=!0,this.props.term.delete({errorHandler:this.onerror.bind(this)}).then((function(){r.a.modal.close(),t.props.ondelete&&t.props.ondelete()}),(function(){t.loaded()})))},n.onsubmit=function(){var t=this;this.loading=!0;var e=this.props.term||r.a.store.createRecord("fof-taxonomy-terms"),n={errorHandler:this.onerror.bind(this)};this.isNew()&&(n.url=r.a.forum.attribute("apiUrl")+this.props.taxonomy.apiEndpoint()+"/terms"),e.save({name:this.name,slug:this.slug,description:this.description,color:this.color,icon:this.icon},n).then((function(){r.a.modal.close(),t.props.onsave&&t.props.onsave(e)}),(function(){t.loaded()}))},e}(mt),dt=n(8),pt=function(t){function e(){return t.apply(this,arguments)||this}Object(u.a)(e,t);var n=e.prototype;return n.init=function(){var t=this;this.terms=null,r.a.request({method:"GET",url:r.a.forum.attribute("apiUrl")+this.props.taxonomy.apiEndpoint()+"/terms"}).then((function(e){t.terms=r.a.store.pushPayload(e),m.redraw()}))},n.view=function(){var t=this;return m(".TaxonomyTermEdit",[null===this.terms?v.a.component({}):m("ol.TaxonomyTermList",{config:function(e){at(e)[0].addEventListener("sortupdate",(function(e){var n=t.$(".js-field-data").map((function(){return $(this).data("id")})).get();r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+"/fof-taxonomy-terms/order",data:{sort:n}}).then((function(t){r.a.store.pushPayload(t),m.redraw()}))}))}},Object(lt.a)(this.terms).map((function(e,n){return m("li.TaxonomyTermListItem",{"data-id":e.id(),style:{color:e.color()}},[Object(dt.a)(e),m("span.TaxonomyTermListItem-name",e.name()),h.a.component({className:"Button Button--link",icon:"fas fa-pencil-alt",onclick:function(){r.a.modal.show(new ft({term:e,ondelete:function(){t.terms.splice(n,1)}}))}})])}))),h.a.component({className:"Button",onclick:function(){r.a.modal.show(new ft({taxonomy:t.props.taxonomy,onsave:function(e){t.terms=Object(lt.a)([].concat(t.terms,[e]))}}))}},r.a.translator.trans("fof-taxonomies.admin.page.create.term"))])},e}(st.a),ht=function(t){function e(){return t.apply(this,arguments)||this}Object(u.a)(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this);var e=this.props.taxonomy;this.name=e?e.name():"",this.slug=e?e.slug():"",this.description=e?e.description():"",this.color=e?e.color():"",this.icon=e?e.icon():"",this.showLabel=!!e&&e.showLabel(),this.showFilter=!!e&&e.showFilter(),this.allowCustomValues=!!e&&e.allowCustomValues(),this.minTerms=e?e.minTerms():"",this.maxTerms=e?e.maxTerms():""},n.translationPrefix=function(){return"fof-taxonomies.admin.edit-taxonomy."},n.isNew=function(){return!this.props.taxonomy},n.form=function(){var t=this;return[m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.name")),m("input.FormControl",{type:"text",value:this.name,oninput:function(e){t.name=e.target.value,t.slug=Object(ct.slug)(e.target.value),t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.slug")),m("input.FormControl",{type:"text",value:this.slug,oninput:function(e){t.slug=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.description")),m("textarea.FormControl",{value:this.description,oninput:function(e){t.description=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.color")),m("input.FormControl",{type:"text",value:this.color,oninput:function(e){t.color=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.icon")),m("input.FormControl",{type:"text",value:this.icon,oninput:function(e){t.icon=e.target.value,t.dirty=!0}})]),m(".Form-group",[m("label",[m("input",{type:"checkbox",checked:this.showLabel,onchange:function(){t.showLabel=!t.showLabel,t.dirty=!0}})," ",r.a.translator.trans(this.translationPrefix()+"field.showLabel")])]),m(".Form-group",[m("label",[m("input",{type:"checkbox",checked:this.showFilter,onchange:function(){t.showFilter=!t.showFilter,t.dirty=!0}})," ",r.a.translator.trans(this.translationPrefix()+"field.showFilter")])]),m(".Form-group",[m("label",[m("input",{type:"checkbox",checked:this.allowCustomValues,onchange:function(){t.allowCustomValues=!t.allowCustomValues,t.dirty=!0}})," ",r.a.translator.trans(this.translationPrefix()+"field.allowCustomValues")])]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.minTerms")),m("input.FormControl",{type:"number",min:0,step:1,value:this.minTerms,oninput:function(e){t.minTerms=parseInt(e.target.value)||"",t.dirty=!0}})]),m(".Form-group",[m("label",r.a.translator.trans(this.translationPrefix()+"field.maxTerms")),m("input.FormControl",{type:"number",min:0,step:1,value:this.maxTerms,oninput:function(e){t.maxTerms=parseInt(e.target.value)||"",t.dirty=!0}})])]},n.ondelete=function(){var t=this;r.a.translator.trans(this.translationPrefix()+"deleteConfirmation",{name:m("em",this.props.taxonomy.name())})&&(this.loading=!0,this.props.taxonomy.delete({errorHandler:this.onerror.bind(this)}).then((function(){r.a.modal.close(),t.props.ondelete&&t.props.ondelete()}),(function(){t.loaded()})))},n.onsubmit=function(){var t=this;this.loading=!0;var e=this.props.taxonomy||r.a.store.createRecord("fof-taxonomies");e.save({name:this.name,slug:this.slug,description:this.description,color:this.color,icon:this.icon,show_label:this.showLabel,show_filter:this.showFilter,allow_custom_values:this.allowCustomValues,min_terms:this.minTerms,max_terms:this.maxTerms},{errorHandler:this.onerror.bind(this)}).then((function(){r.a.modal.close(),t.props.onsave&&t.props.onsave(e)}),(function(){t.loaded()}))},e}(mt),gt=function(t){function e(){return t.apply(this,arguments)||this}Object(u.a)(e,t);var n=e.prototype;return n.init=function(){var e=this;t.prototype.init.call(this),this.tabIndex=0,this.taxonomies=null,r.a.request({method:"GET",url:r.a.forum.attribute("apiUrl")+"/fof-taxonomies"}).then((function(t){e.taxonomies=r.a.store.pushPayload(t),m.redraw()}))},n.view=function(){var t=this;return m(".TaxonomiesPage",m(".container",[null===this.taxonomies?v.a.component({}):[m("h2",r.a.translator.trans("fof-taxonomies.admin.page.title")),m(".TaxonomyTabs",[Object(y.a)(this.taxonomies).map((function(e,n){return m(".TaxonomyTab",{onclick:function(){t.tabIndex=n},className:t.tabIndex===n?"active":"",style:{color:e.color()}},[Object(dt.a)(e)," ",e.name()," ",h.a.component({className:"Button Button--link",icon:"fas fa-pencil-alt",onclick:function(){r.a.modal.show(new ht({taxonomy:e,ondelete:function(){t.taxonomies.splice(n,1),t.tabIndex=0}}))}})])})),h.a.component({className:"TaxonomyTab",icon:"fas fa-plus",onclick:function(){r.a.modal.show(new ht({onsave:function(e){t.taxonomies=Object(y.a)([].concat(t.taxonomies,[e])),t.tabIndex=t.taxonomies.findIndex((function(t){return t===e}))}}))}},r.a.translator.trans("fof-taxonomies.admin.page.create.taxonomy"))]),this.tabIndex<this.taxonomies.length?m("div",m("div",{key:this.taxonomies[this.tabIndex].id()},pt.component({taxonomy:this.taxonomies[this.tabIndex]}))):null]]))},e}(d.a),vt=n(14);r.a.initializers.add("fof-taxonomies",(function(){r.a.routes["fof-taxonomies"]={path:"/taxonomies",component:gt.component()},r.a.extensionSettings["fof-taxonomies"]=function(){return m.route(r.a.route("fof-taxonomies"))},Object(a.extend)(c.a.prototype,"items",(function(t){t.add("fof-taxonomies",s.a.component({href:r.a.route("fof-taxonomies"),icon:"fas fa-tags",description:r.a.translator.trans("fof-taxonomies.admin.menu.description")},r.a.translator.trans("fof-taxonomies.admin.menu.title")))})),Object(vt.a)()}))}]);
//# sourceMappingURL=admin.js.map